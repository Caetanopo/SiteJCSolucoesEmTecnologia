<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Orçamento | JC Soluções</title>

    <!-- Favicon -->
    <link rel="icon" href="Imagens/Logos da Empresa/Fundo transparente.png" type="image/png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scroll::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        .custom-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 antialiased h-screen flex flex-col overflow-hidden">

    <!-- NAVBAR SIMPLIFICADA -->
    <nav class="bg-slate-900 text-white shadow-lg z-20 shrink-0 py-4">
        <div class="container mx-auto px-6 flex justify-between items-center">
            <a href="index.html" class="flex items-center gap-3 group">
                <!-- LOGO AUMENTADA -->
                <img src="Imagens/Logos da Empresa/Fundo transparente.png" alt="JC Soluções" class="h-20 md:h-24 w-auto object-contain brightness-0 invert transition-transform duration-300 group-hover:scale-105">
                <div class="flex flex-col">
                    <span class="text-2xl md:text-3xl font-bold tracking-tight leading-none text-white">SOLUÇÕES</span>
                    <span class="text-xs md:text-sm uppercase tracking-widest font-medium text-cyan-400">Simulador Online</span>
                </div>
            </a>
            <a href="index.html" class="text-sm text-slate-300 hover:text-white flex items-center gap-2 transition-colors">
                <i data-lucide="arrow-left" class="w-4 h-4"></i> Voltar ao Site
            </a>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="flex-1 container mx-auto px-4 md:px-6 py-6 overflow-hidden flex flex-col lg:flex-row gap-6">

        <!-- COLUNA ESQUERDA: CATÁLOGO -->
        <section class="flex flex-col lg:w-3/5 h-full overflow-hidden bg-white rounded-2xl shadow-sm border border-slate-200">

            <!-- Categorias -->
            <div class="flex border-b border-slate-200 bg-slate-50 overflow-x-auto shrink-0" id="category-tabs">
                <!-- Injetado via JS -->
            </div>

            <!-- Título da Categoria -->
            <div class="p-6 pb-2 shrink-0">
                <h2 id="cat-title" class="text-2xl font-bold text-slate-900 mb-1">Selecione uma Categoria</h2>
                <div class="flex flex-col gap-1">
                    <p id="cat-desc" class="text-sm text-slate-500">Adicione os serviços que você precisa ao seu pacote.</p>
                    <!-- Mensagem explicativa dinâmica -->
                    <p id="marketing-hint" class="hidden text-xs text-indigo-600 font-medium bg-indigo-50 px-2 py-1 rounded w-fit mt-1 items-center gap-1">
                        <i data-lucide="info" class="w-3 h-3 inline"></i> Clique no plano para ver os detalhes
                    </p>
                </div>
            </div>

            <!-- Grid de Serviços -->
            <div id="services-grid" class="p-6 grid gap-4 overflow-y-auto custom-scroll content-start">
                <!-- Cards Injetados via JS -->
            </div>
        </section>

        <!-- COLUNA DIREITA: CARRINHO / RESUMO -->
        <section class="flex flex-col lg:w-2/5 h-full gap-4 overflow-y-auto lg:overflow-hidden">

            <div class="bg-slate-900 text-white rounded-2xl shadow-xl p-6 flex flex-col flex-1 overflow-hidden relative">
                <!-- Detalhe decorativo -->
                <div class="absolute top-0 right-0 w-32 h-32 bg-blue-600/20 rounded-bl-full pointer-events-none"></div>

                <div class="flex justify-between items-center mb-6 shrink-0 relative z-10">
                    <h3 class="font-bold flex items-center gap-2 text-xl">
                        <i data-lucide="shopping-cart" class="w-5 h-5 text-cyan-400"></i> Seu Pacote
                    </h3>
                    <button onclick="clearQuote()" class="text-xs text-slate-400 hover:text-white underline transition-colors">Limpar tudo</button>
                </div>

                <!-- Lista de Itens -->
                <div id="quote-list" class="flex-1 overflow-y-auto custom-scroll space-y-3 pr-2 mb-4 relative z-10">
                    <div class="text-center text-slate-500 text-sm py-12 italic border-2 border-dashed border-slate-800 rounded-xl">
                        Seu carrinho está vazio.<br>Adicione serviços ao lado.
                    </div>
                </div>

                <!-- Total e Ação -->
                <div class="pt-6 border-t border-slate-700 shrink-0 relative z-10">
                    <div class="flex justify-between items-end mb-2">
                        <span class="text-slate-400 text-sm">Investimento Estimado:</span>
                        <span id="quote-total" class="text-2xl font-bold text-emerald-400">R$ 0,00</span>
                    </div>
                    <p class="text-[10px] text-slate-500 mb-4">*Valores aproximados. O orçamento final pode variar conforme especificações.</p>

                    <button onclick="sendToWhatsapp()" class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-4 rounded-xl shadow-lg transition-all transform hover:scale-[1.02] flex items-center justify-center gap-2">
                        <i data-lucide="message-circle" class="w-5 h-5"></i>
                        Receber Proposta no WhatsApp
                    </button>
                </div>
            </div>

        </section>
    </main>

    <!-- JAVASCRIPT -->
    <script>
        // --- DADOS DOS SERVIÇOS (COM SEUS VALORES ATUALIZADOS) ---
        const appData = {
            categories: [
                {
                    id: 'av',
                    name: 'Vídeos & IA',
                    icon: 'video',
                    color: 'blue',
                    desc: 'Produção audiovisual moderna com Inteligência Artificial.',
                    services: [
                        { name: 'Vídeo Curto (Reels/TikTok)', priceMin: 100, priceMax: 350, unit: 'unidade' },
                        { name: 'Vídeo Institucional com IA', priceMin: 500, priceMax: 800, unit: 'unidade' },
                        { name: 'Pacote Mensal (4 Vídeos)', priceMin: 800, priceMax: 1200, unit: 'mensal' },
                        { name: 'Edição de Vídeo Simples', priceMin: 150, priceMax: 300, unit: 'unidade' }
                    ]
                },
                {
                    id: 'web',
                    name: 'Sites & Sistemas',
                    icon: 'globe',
                    color: 'blue',
                    desc: 'Desenvolvimento profissional de sites e softwares.',
                    services: [
                        { name: 'Landing Page (Vendas)', priceMin: 400, priceMax: 800, unit: 'projeto' },
                        { name: 'Site Institucional Completo', priceMin: 600, priceMax: 1400, unit: 'projeto' },
                        { name: 'Sistema Web de Gestão', priceMin: 3000, priceMax: 5000, unit: 'projeto' },
                        { name: 'Aplicativo Mobile (App)', priceMin: 2500, priceMax: 4000, unit: 'projeto' }
                    ]
                },
                {
                    id: 'branding',
                    name: 'Design & Marca',
                    icon: 'palette',
                    color: 'blue',
                    desc: 'Identidade visual para profissionalizar seu negócio.',
                    services: [
                        { name: 'Configuração Instagram Pro', priceMin: 200, priceMax: 400, unit: 'unidade' },
                        { name: 'Pacote de Artes (Feed)', priceMin: 450, priceMax: 900, unit: 'pack 6 artes' },
                        { name: 'Criação/Redesign de Logo', priceMin: 300, priceMax: 800, unit: 'unidade' },
                        { name: 'Identidade Visual Completa', priceMin: 800, priceMax: 2000, unit: 'projeto' }
                    ]
                },
                {
                    id: 'marketing',
                    name: 'Marketing Digital',
                    icon: 'megaphone',
                    color: 'indigo',
                    desc: 'Gestão estratégica de redes sociais e tráfego pago.',
                    services: [
                        {
                            name: 'Plano Básico',
                            priceMin: 349.90, priceMax: 349.90, unit: 'mensal',
                            features: ['2 posts por semana', '2 vídeos com IA', 'Edição de fotos/vídeos', 'Agendamento de posts']
                        },
                        {
                            name: 'Plano Intermediário',
                            priceMin: 549.90, priceMax: 549.90, unit: 'mensal',
                            features: ['4 posts por semana', '3 vídeos com IA', 'Edição personalizada', 'Atendimento prioritário']
                        },
                        {
                            name: 'Plano Premium',
                            priceMin: 849.90, priceMax: 849.90, unit: 'mensal',
                            features: ['24 posts por mês', '2 vídeos com IA por semana', 'Edição cinematográfica', 'Atendimento imediato via WhatsApp']
                        }
                    ]
                }
            ]
        };

        // --- ESTADO DA APLICAÇÃO ---
        let state = {
            activeCategory: 'av',
            quote: []
        };

        // --- INICIALIZAÇÃO ---
        document.addEventListener('DOMContentLoaded', () => {
            renderTabs();
            renderContent();
            lucide.createIcons();
        });

        // --- HELPERS ---
        function formatMoney(value) {
            return value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        }

        // --- NOVA FUNÇÃO DE TOGGLE (FECHA OS OUTROS) ---
        function toggleDetails(id, iconId) {
            // Fecha todos os outros detalhes da categoria Marketing
            document.querySelectorAll('.marketing-details').forEach(el => {
                if (el.id !== id) {
                    el.classList.add('hidden');
                }
            });
            document.querySelectorAll('.marketing-icon').forEach(el => {
                if (el.id !== iconId) {
                    el.classList.remove('rotate-180');
                }
            });

            // Alterna o atual
            const details = document.getElementById(id);
            const icon = document.getElementById(iconId);

            if (details.classList.contains('hidden')) {
                details.classList.remove('hidden');
                icon.classList.add('rotate-180');
            } else {
                details.classList.add('hidden');
                icon.classList.remove('rotate-180');
            }
        }

        // --- FUNÇÕES DE RENDERIZAÇÃO ---
        function setActiveCategory(id) {
            state.activeCategory = id;
            renderTabs();
            renderContent();
        }

        function renderTabs() {
            const container = document.getElementById('category-tabs');
            container.innerHTML = appData.categories.map(cat => {
                const isActive = state.activeCategory === cat.id;
                const activeColorClass = cat.color === 'indigo'
                    ? 'border-indigo-600 text-indigo-600 bg-indigo-50'
                    : 'border-blue-600 text-blue-600 bg-blue-50';

                return `
                    <button onclick="setActiveCategory('${cat.id}')"
                        class="px-6 py-4 text-sm font-semibold whitespace-nowrap transition-colors flex items-center gap-2 border-b-2
                        ${isActive ? activeColorClass : 'border-transparent text-slate-500 hover:text-slate-700 hover:bg-slate-50'}">
                        <i data-lucide="${cat.icon}" class="w-4 h-4"></i> ${cat.name}
                    </button>
                `}).join('');
            lucide.createIcons();
        }

        function renderContent() {
            const cat = appData.categories.find(c => c.id === state.activeCategory);
            document.getElementById('cat-title').textContent = cat.name;
            document.getElementById('cat-desc').textContent = cat.desc;

            // Exibe mensagem de ajuda apenas se for Marketing
            const hint = document.getElementById('marketing-hint');
            if (cat.id === 'marketing') {
                hint.classList.remove('hidden');
                hint.classList.add('flex');
            } else {
                hint.classList.add('hidden');
                hint.classList.remove('flex');
            }

            const isMarketing = cat.id === 'marketing';

            const priceColor = isMarketing ? 'text-indigo-600' : 'text-blue-600';
            const btnColor = isMarketing ? 'hover:bg-indigo-600' : 'hover:bg-blue-600';
            const hoverBorder = isMarketing ? 'hover:border-indigo-200' : 'hover:border-blue-200';

            const gridContainer = document.getElementById('services-grid');
            gridContainer.className = isMarketing
                ? "p-6 grid grid-cols-1 gap-4 overflow-y-auto custom-scroll content-start"
                : "p-6 grid grid-cols-1 md:grid-cols-2 gap-4 overflow-y-auto custom-scroll content-start";

            gridContainer.innerHTML = cat.services.map((svc, index) => {
                const priceDisplay = svc.priceMin === svc.priceMax
                    ? formatMoney(svc.priceMin)
                    : `A partir de ${formatMoney(svc.priceMin)}`;

                // Card de Marketing com Detalhes Expansíveis
                if (isMarketing) {
                    const detailsId = `details-marketing-${index}`;
                    const iconId = `icon-marketing-${index}`;
                    return `
                        <div class="bg-white border border-indigo-100 rounded-xl hover:shadow-lg transition-all ${hoverBorder} group relative overflow-hidden">
                            <!-- Cabeçalho Clicável -->
                            <div onclick="toggleDetails('${detailsId}', '${iconId}')" class="p-5 cursor-pointer flex justify-between items-center bg-indigo-50/30 select-none">
                                <div>
                                    <h4 class="text-lg font-bold text-slate-800 flex items-center gap-2">
                                        ${svc.name}
                                        <span class="text-[10px] font-bold uppercase bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded">${svc.unit}</span>
                                    </h4>
                                    <div class="text-xl font-bold ${priceColor} mt-1">${priceDisplay}</div>
                                </div>
                                <!-- Classe marketing-icon adicionada para controle -->
                                <i id="${iconId}" data-lucide="chevron-down" class="w-5 h-5 text-indigo-400 transition-transform duration-300 marketing-icon"></i>
                            </div>

                            <!-- Conteúdo Expansível (Escondido por padrão) -->
                            <!-- Classe marketing-details adicionada para controle -->
                            <div id="${detailsId}" class="hidden bg-white border-t border-indigo-50 marketing-details">
                                <div class="p-5 pt-2">
                                    <ul class="space-y-2 mb-4">
                                        ${svc.features.map(feat => `
                                            <li class="flex items-center gap-2 text-sm text-slate-600">
                                                <i data-lucide="check" class="w-4 h-4 text-emerald-500 shrink-0"></i> ${feat}
                                            </li>
                                        `).join('')}
                                    </ul>
                                    <button onclick="addToQuote('${cat.id}', ${index})" class="w-full py-2.5 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700 transition-all flex items-center justify-center gap-2 shadow-sm">
                                        <i data-lucide="plus" class="w-4 h-4"></i> Adicionar este Plano
                                    </button>
                                </div>
                            </div>
                        </div>
                        `;
                }

                // Renderização Padrão
                return `
                    <div class="bg-white border border-slate-100 rounded-xl p-5 hover:shadow-md transition-all ${hoverBorder} group h-fit">
                        <div class="flex justify-between items-start mb-3">
                            <h4 class="font-bold text-slate-800 pr-2 leading-tight">${svc.name}</h4>
                            <span class="text-[10px] font-bold uppercase bg-slate-100 text-slate-500 px-2 py-1 rounded h-fit">${svc.unit}</span>
                        </div>

                        <div class="mb-4">
                            <div class="text-lg font-bold ${priceColor}">
                                ${priceDisplay}
                            </div>
                        </div>

                        <button onclick="addToQuote('${cat.id}', ${index})" class="w-full py-2.5 bg-slate-100 text-slate-700 rounded-lg text-sm font-bold ${btnColor} hover:text-white transition-all flex items-center justify-center gap-2">
                            <i data-lucide="plus" class="w-4 h-4"></i> Adicionar
                        </button>
                    </div>
                    `;
            }).join('');
            lucide.createIcons();
        }

        // --- LÓGICA DO CARRINHO ---
        function addToQuote(catId, svcIndex) {
            const svc = appData.categories.find(c => c.id === catId).services[svcIndex];
            state.quote.push({ ...svc });
            updateQuoteDisplay();
        }

        function removeFromQuote(index) {
            state.quote.splice(index, 1);
            updateQuoteDisplay();
        }

        function clearQuote() {
            state.quote = [];
            updateQuoteDisplay();
        }

        function updateQuoteDisplay() {
            const list = document.getElementById('quote-list');
            const totalEl = document.getElementById('quote-total');

            if (state.quote.length === 0) {
                list.innerHTML = `<div class="text-center text-slate-500 text-sm py-12 italic border-2 border-dashed border-slate-800 rounded-xl">Seu carrinho está vazio.<br>Adicione serviços ao lado.</div>`;
                totalEl.textContent = 'R$ 0,00';
                return;
            }

            let minTotal = 0;
            let maxTotal = 0;

            list.innerHTML = state.quote.map((item, i) => {
                minTotal += item.priceMin;
                maxTotal += item.priceMax;

                // Formatação inteligente para a lista também
                const priceText = item.priceMin === item.priceMax
                    ? formatMoney(item.priceMin)
                    : `${formatMoney(item.priceMin)} - ${formatMoney(item.priceMax)}`;

                return `
                    <div class="flex justify-between items-center bg-slate-800 p-3 rounded-lg text-sm animate-fade-in border border-slate-700">
                        <div class="truncate pr-2">
                            <div class="font-medium text-white">${item.name}</div>
                            <div class="text-xs text-slate-400">Est.: ${priceText}</div>
                        </div>
                        <button onclick="removeFromQuote(${i})" class="text-slate-500 hover:text-red-400 p-1">
                            <i data-lucide="trash-2" class="w-4 h-4"></i>
                        </button>
                    </div>
                    `;
            }).join('');

            // Formatação do Total
            const totalText = minTotal === maxTotal
                ? formatMoney(minTotal)
                : `${formatMoney(minTotal)} - ${formatMoney(maxTotal)}`;

            totalEl.textContent = totalText;
            lucide.createIcons();
        }

        // --- FINALIZAR NO WHATSAPP (TEXTO LIMPO E EM NEGRITO) ---
        function sendToWhatsapp() {
            if (state.quote.length === 0) {
                alert("Por favor, adicione pelo menos um serviço ao orçamento.");
                return;
            }

            const phone = "+5554991678057";

            let message = `*Olá! Fiz uma simulação no site da JC Soluções.*\n\n*Gostaria de orçar os seguintes serviços:*\n`;

            let totalMin = 0;
            let totalMax = 0;

            state.quote.forEach(item => {
                message += `- *${item.name}*\n`;
                totalMin += item.priceMin;
                totalMax += item.priceMax;
            });

            const totalText = totalMin === totalMax
                ? totalMin.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })
                : `${totalMin.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })} a ${totalMax.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}`;

            message += `\n*Investimento Estimado:* ${totalText}\n\nPodemos conversar sobre os detalhes?`;

            const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
        }
    </script>
</body>
</html>